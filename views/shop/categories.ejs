<%-include("../layouts/userHeader.ejs")%>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <style>
        .constainerGrid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(183.75px, 1fr));
        }

        .item {
            display: flex;
            flex-direction: column;
            width: 183px;
        }

        .iner-item {
            display: flex;
            justify-content: center;
        }

        .price {
            display: flex;
            justify-content: center;


        }

        body,p{
            font-family:'Times New Roman', Times, serif ;
        }

        @media (max-width: 995px) {
            .filter-widget{
                display: block !important;
            }
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <!--Body Content-->
    <div class="collection-header">

    </div>
    <div id="page-content" style="margin-top: 6em;">
        <!--Collection Banner-->

        <!--End Collection Banner-->

        <div class="container">
            <div class="row">
                <!--Main Content-->
                <div class="col-12 col-sm-12 col-md-9 col-lg-9 main-col">
                    <div class="productList">
                        <!--Toolbar-->
                        <button type="button" class="btn btn-filter d-block d-md-none d-lg-none"> Product
                            Filters</button>
                        <div class="toolbar">
                            <div class="filters-toolbar-wrapper">
                                <div class="row">
                                    <div
                                        class="col-4 col-md-4 col-lg-4 filters-toolbar__item collection-view-as d-flex justify-content-start align-items-center">
                                        <a title="Grid View" class="change-view change-view--active">
                                            <img src="assets/images/grid.jpg" loading="lazy" alt="Grid" />
                                        </a>
                                        <a title="List View" class="change-view">
                                            <img src="assets/images/list.jpg" loading="lazy" alt="List" />
                                        </a>
                                    </div>
                                    <div
                                        class="col-4 col-md-4 col-lg-4 text-center filters-toolbar__item filters-toolbar__item--count d-flex justify-content-center align-items-center">

                                        <span class="filters-toolbar__product-count">Showing: <%=count%></span>

                                    </div>
                                    <div class="col-4 col-md-4 col-lg-4 text-right">
                                        <div class="filters-toolbar__item">
                                            <label for="SortBy" class="hidden">Sort</label>
                                            <form id="selectPrice">
                                                <select name="SortBy" id="SortBy" onchange="sortDdbtn()"
                                                    class="filters-toolbar__input filters-toolbar__input--sort">
                                                    <option value="clearSort" selected="selected">Sort</option>

                                                    <option id="lowToHigh" value="lowToHigh">Price, low to high</option>
                                                    <option id="highToLow" value="highToLow">Price, high to low</option>
                                                </select>
                                            </form>
                                            <input class="collection-header__default-sort" type="hidden" value="manual">
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <!--End Toolbar-->
                        <div class="grid-products grid--view-items product-load-more">
                            <div class="row">

                                <div class="constainerGrid" style="width: 855px;">
                                    <% productDetail.forEach((product)=>{%>
                                        <div class="item">
                                            <a href="/singleProduct<%=product._id%>" style="cursor: pointer;">
                                            <!-- <img src="../../images/categoriedImages/categoriesImage-1707012478322-237380112.jpeg" style="width: 183.75px; height: 183.75px;"> -->
                                            <img data-src="../images/categoriedImages/<%=product.productImage1%>"
                                                src="../images/categoriedImages/<%=product.productImage1%>" loading="lazy" alt="image"
                                                title="<%=product.productName%>" style="width: 183.75px; height: 183.75px;">

                                            <button class="btn btn-addto-cart" type="button" style="margin-top: 3px; color: wheat;">
                                                <a href="/singleProduct<%=product._id%>">

                                                    Add To Cart
                                                </a>
                                            </button>

                                            <div class="iner-item">
                                                <p>
                                                    <%=product.productName%>
                                                </p>
                                            </div>
                                            <div class="price">
                                                <p>â‚¹<%= product.productPrice%>
                                                </p>
                                            </div>
                                            </a>
                                        </div>
                                        <%})%>
                                </div>

                                <!-- pagination -->
                                <div class="d-flex justify-content-center py-3">
                                    <nav aria-label="Page navigation example">
                                        <ul class="pagination">
                                            <% for( let i=0; i < count/limit; i++ ) { %>
                                                <li class="page-item">
                                                    
                                                            <%if(page==i+1){%>
                                                                
                                                                    <a class="page-link">
                                                                        <%= i+1 %>
                                                                    </a>
                                                                    <%}else{%>

                                                                        <a class="page-link"
                                                                            href="/categories?page=<%=i+1 %>">
                                                                            <%= i+1 %>
                                                                        </a>
                                                                    <%}%>
                                                </li>
                                                <% } %>

                                        </ul>

                                </div>


                            </div>
                        </div>
                    </div>

                </div>
                <!--End Main Content-->
                <!--Sidebar-->
                <div class="col-12 col-sm-12 col-md-3 col-lg-3 sidebar filterbar">
                    <div class="closeFilter d-block d-md-none d-lg-none"><i class="icon icon anm anm-times-l"></i></div>
                    <div class="sidebar_tags">
                        <!--Categories-->
                        <div class="sidebar_widget categories filter-widget">
                            <div class="widget-title">
                                <h2>Categories</h2>
                            </div>
                            <div class="widget-content">
                                <ul class="sidebar_categories">
                                    <li> <a href="/categories/filter?categoriesName=all"><span id="all">All</span></a>
                                    </li>
                                    <% categorie.forEach((data)=>{%>
                                        <li class="lvl-1"><a
                                                href="/categories/filter?categoriesName=<%=data.categoryName%>"
                                                class="site-nav" id="<%=data.categoryName%>">
                                                <%=data.categoryName%>
                                            </a></li>
                                        <%})%>

                                </ul>
                            </div>
                        </div>
                        <!--Categories-->

                        <!-- <div class="col-6 text-right margin-25px-top">
                            <button class="btn btn-secondary btn--small">filter</button>
                        </div> -->
                        <!--Brand-->
                        <div class="sidebar_widget filterBox filter-widget">
                            <div class="widget-title">
                                <h2>Brands</h2>
                            </div>
                            <ul>
                                <form id="priceProduct">
                                    <li id="allPrice" style="display: none;">
                                        <input type="radio" value="allPrice" id="price0" name="price">
                                        <label for="price1">
                                            All Price
                                            </span></label>
                                    </li>
                                    <li>
                                        <input type="radio" value="3000-4000" id="price1" name="price">
                                        <label for="price1">
                                            â‚¹3000-â‚¹4000
                                            </span></label>
                                    </li>
                                    <li>
                                        <input type="radio" value="4000-6000" id="price2" name="price">
                                        <label for="price2">
                                            â‚¹4000-â‚¹6000
                                            </span></label>
                                    </li>
                                    <li>
                                        <input type="radio" value="6000-8000" id="price3" name="price">
                                        <label for="price3">
                                            â‚¹6000-â‚¹8000
                                            </span></label>
                                    </li>
                                    <li>
                                        <input type="radio" value="8000-10000" id="price4" name="price">
                                        <label for="price4">
                                            â‚¹8000-â‚¹10000
                                            </span></label>
                                    </li>
                                    <li>
                                        <input type="radio" value="10000-14000" id="price5" name="price">
                                        <label for="price5">
                                            â‚¹10000-â‚¹14000
                                            </span></label>
                                    </li>
                                </form>
                            </ul>

                            <div class="col-6 text-right margin-25px-top">
                                <button class="btn btn-secondary btn--small" id="filters">filter</button>
                            </div>
                        </div>
                        <!--End Brand-->
                        <!--Popular Products-->
                        <div class="sidebar_widget">
                            <div class="widget-title">
                                <h2>Popular Products</h2>
                            </div>
                            <div class="widget-content">
                                <div class="list list-sidebar-products">
                                    <div class="grid">
                                        <div class="grid__item">
                                            <div class="mini-list-item">
                                                <div class="mini-view_image">
                                                    <a class="grid-view-item__link" href="#">
                                                        <img class="grid-view-item__image"
                                                            src="assets/images1/categoriePage/categorie_image1.jpeg"
                                                            alt="" loading="lazy" />
                                                    </a>
                                                </div>
                                                <div class="details"> <a class="grid-view-item__title"
                                                        href="#">watch</a>
                                                    <div class="grid-view-item__meta"><span
                                                            class="product-price__price"><span
                                                                class="money">â‚¹22173.60</span></span></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="grid__item">
                                            <div class="mini-list-item">
                                                <div class="mini-view_image"> <a class="grid-view-item__link"
                                                        href="#"><img class="grid-view-item__image"
                                                            src="assets/images1/categoriePage/categorie_image1.jpeg"
                                                            alt=""  loading="lazy" /></a> </div>
                                                <div class="details"> <a class="grid-view-item__title"
                                                        href="#">watch</a>
                                                    <div class="grid-view-item__meta"><span
                                                            class="product-price__price"><span
                                                                class="money">â‚¹20378.00</span></span></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="grid__item">
                                            <div class="mini-list-item">
                                                <div class="mini-view_image"> <a class="grid-view-item__link"
                                                        href="#"><img class="grid-view-item__image"
                                                            src="assets/images1/categoriePage/categories_image2.jpg"
                                                            alt="" loading="lazy" /></a> </div>
                                                <div class="details"> <a class="grid-view-item__title"
                                                        href="#">watch</a>
                                                    <div class="grid-view-item__meta"><span
                                                            class="product-price__price"><span
                                                                class="money">â‚¹23378.60</span></span></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="grid__item">
                                            <div class="mini-list-item">
                                                <div class="mini-view_image"> <a class="grid-view-item__link"
                                                        href="#"><img class="grid-view-item__image"
                                                            src="assets/images1/categoriePage/categories_image2.jpg"
                                                            alt="" loading="lazy" /></a> </div>
                                                <div class="details"> <a class="grid-view-item__title"
                                                        href="#">watch</a>
                                                    <div class="grid-view-item__meta"><span
                                                            class="product-price__price"><span
                                                                class="money">â‚¹22855.00</span></span></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--End Popular Products-->
                        <!--Banner-->
                        <div class="sidebar_widget static-banner">
                            <img src="assets/images1/categoriePage/Watch_Offer.jpeg" loading="lazy" alt="" />
                        </div>
                        <!--Banner-->

                        <!--Product Tags-->

                    </div>
                </div>
                <!--End Sidebar-->
            </div>
        </div>

    </div>
    <!--End Body Content-->

    <!--Footer-->
    <footer id="footer">
        <div class="newsletter-section">
            <div class="container">
                <div class="row">
                    <div
                        class="col-12 col-sm-12 col-md-12 col-lg-7 w-100 d-flex justify-content-start align-items-center">
                        <div class="display-table">
                            <div class="display-table-cell footer-newsletter">
                                <div class="section-header text-center">
                                    <label class="h2"><span>sign up for </span>newsletter</label>
                                </div>
                                <form action="#" method="post">
                                    <div class="input-group">
                                        <input type="email" class="input-group__field newsletter__input" name="EMAIL"
                                            value="" placeholder="Email address" required="">
                                        <span class="input-group__btn">
                                            <button type="submit" class="btn newsletter__submit" name="commit"
                                                id="Subscribe"><span
                                                    class="newsletter__submit-text--large">Subscribe</span></button>
                                        </span>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-sm-12 col-md-12 col-lg-5 d-flex justify-content-end align-items-center">
                        <div class="footer-social">
                            <ul class="list--inline site-footer__social-icons social-icons">
                                <li><a class="social-icons__link" href="#" target="_blank"
                                        title="Belle Multipurpose Bootstrap 4 Template on Facebook"><i
                                            class="icon icon-facebook"></i></a></li>
                                <li><a class="social-icons__link" href="#" target="_blank"
                                        title="Belle Multipurpose Bootstrap 4 Template on Twitter"><i
                                            class="icon icon-twitter"></i> <span
                                            class="icon__fallback-text">Twitter</span></a></li>
                                <li><a class="social-icons__link" href="#" target="_blank"
                                        title="Belle Multipurpose Bootstrap 4 Template on Pinterest"><i
                                            class="icon icon-pinterest"></i> <span
                                            class="icon__fallback-text">Pinterest</span></a></li>
                                <li><a class="social-icons__link" href="#" target="_blank"
                                        title="Belle Multipurpose Bootstrap 4 Template on Instagram"><i
                                            class="icon icon-instagram"></i> <span
                                            class="icon__fallback-text">Instagram</span></a></li>
                                <li><a class="social-icons__link" href="#" target="_blank"
                                        title="Belle Multipurpose Bootstrap 4 Template on Tumblr"><i
                                            class="icon icon-tumblr-alt"></i> <span
                                            class="icon__fallback-text">Tumblr</span></a></li>
                                <li><a class="social-icons__link" href="#" target="_blank"
                                        title="Belle Multipurpose Bootstrap 4 Template on YouTube"><i
                                            class="icon icon-youtube"></i> <span
                                            class="icon__fallback-text">YouTube</span></a></li>
                                <li><a class="social-icons__link" href="#" target="_blank"
                                        title="Belle Multipurpose Bootstrap 4 Template on Vimeo"><i
                                            class="icon icon-vimeo-alt"></i> <span
                                            class="icon__fallback-text">Vimeo</span></a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="site-footer">
            <div class="container">
                <!--Footer Links-->
                <div class="footer-top">
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-3 col-lg-3 footer-links">
                            <h4 class="h4">Quick Shop</h4>
                            <ul>
                                <li><a href="#">Women</a></li>
                                <li><a href="#">Men</a></li>
                                <li><a href="#">Kids</a></li>
                                <li><a href="#">Sale</a></li>
                            </ul>
                        </div>
                        <div class="col-12 col-sm-12 col-md-3 col-lg-3 footer-links">
                            <h4 class="h4">Informations</h4>
                            <ul>
                                <li><a href="#">About us</a></li>
                                <li><a href="#">Careers</a></li>
                                <li><a href="#">Privacy policy</a></li>
                                <li><a href="#">Terms &amp; condition</a></li>
                                <li><a href="#">My Account</a></li>
                            </ul>
                        </div>
                        <div class="col-12 col-sm-12 col-md-3 col-lg-3 footer-links">
                            <h4 class="h4">Customer Services</h4>
                            <ul>
                                <li><a href="#">Request Personal Data</a></li>
                                <li><a href="#">FAQ's</a></li>
                                <li><a href="#">Contact Us</a></li>
                                <li><a href="#">Orders and Returns</a></li>
                                <li><a href="#">Support Center</a></li>
                            </ul>
                        </div>
                        <div class="col-12 col-sm-12 col-md-3 col-lg-3 contact-box">
                            <h4 class="h4">Contact Us</h4>
                            <ul class="addressFooter">
                                <li><i class="icon anm anm-map-marker-al"></i>
                                    <p>55 Gallaxy Enque,<br>2568 steet, 23568 NY</p>
                                </li>
                                <li class="phone"><i class="icon anm anm-phone-s"></i>
                                    <p>(440) 000 000 0000</p>
                                </li>
                                <li class="email"><i class="icon anm anm-envelope-l"></i>
                                    <p>sales@yousite.com</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <!--End Footer Links-->
                <hr>
                <div class="footer-bottom">
                    <div class="row">
                        <!--Footer Copyright-->
                        <div
                            class="col-12 col-sm-12 col-md-6 col-lg-6 order-1 order-md-0 order-lg-0 order-sm-1 copyright text-sm-center text-md-left text-lg-left">
                            <span></span> <a href="templateshub.net">Templates Hub</a></div>
                        <!--End Footer Copyright-->
                        <!--Footer Payment Icon-->
                        <div
                            class="col-12 col-sm-12 col-md-6 col-lg-6 order-0 order-md-1 order-lg-1 order-sm-0 payment-icons text-right text-md-center">
                            <ul class="payment-icons list--inline">
                                <li><i class="icon fa fa-cc-visa" aria-hidden="true"></i></li>
                                <li><i class="icon fa fa-cc-mastercard" aria-hidden="true"></i></li>
                                <li><i class="icon fa fa-cc-discover" aria-hidden="true"></i></li>
                                <li><i class="icon fa fa-cc-paypal" aria-hidden="true"></i></li>
                                <li><i class="icon fa fa-cc-amex" aria-hidden="true"></i></li>
                                <li><i class="icon fa fa-credit-card" aria-hidden="true"></i></li>
                            </ul>
                        </div>
                        <!--End Footer Payment Icon-->
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--End Footer-->
    <!--Scoll Top-->
    <span id="site-scroll"><i class="icon anm anm-angle-up-r"></i></span>
    <!--End Scoll Top-->

    <!--Quick View popup-->
    <div class="modal fade quick-view-popup" id="content_quickview">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <div id="ProductSection-product-template" class="product-template__container prstyle1">
                        <div class="product-single">
                            <!-- Start model close -->
                            <a href="javascript:void()" data-dismiss="modal" class="model-close-btn pull-right"
                                title="close"><span class="icon icon anm anm-times-l"></span></a>
                            <!-- End model close -->
                            <div class="row">
                                <div class="col-lg-6 col-md-6 col-sm-12 col-12">
                                    <div class="product-details-img">
                                        <div class="pl-20">
                                            <img src="assets/images/product-detail-page/camelia-reversible-big1.jpg"
                                                alt="" loading="lazy" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6 col-sm-12 col-12">
                                    <div class="product-single__meta">
                                        <h2 class="product-single__title">Product Quick View Popup</h2>
                                        <div class="prInfoRow">
                                            <div class="product-stock"> <span class="instock ">In Stock</span> <span
                                                    class="outstock hide">Unavailable</span> </div>
                                            <div class="product-sku">SKU: <span class="variant-sku">19115-rdxs</span>
                                            </div>
                                        </div>
                                        <p class="product-single__price product-single__price-product-template">
                                            <span class="visually-hidden">Regular price</span>
                                            <s id="ComparePrice-product-template"><span class="money">â‚¹600.00</span></s>
                                            <span
                                                class="product-price__price product-price__price-product-template product-price__sale product-price__sale--single">
                                                <span id="ProductPrice-product-template"><span
                                                        class="money">â‚¹500.00</span></span>
                                            </span>
                                        </p>
                                        <div class="product-single__description rte">
                                            Belle Multipurpose Bootstrap 4 Html Template that will give you and your
                                            customers a smooth shopping experience which can be used for various kinds
                                            of stores such as fashion,...
                                        </div>


                                        <div class="display-table shareRow">
                                            <div class="display-table-cell">
                                                <div class="wishlist-btn">
                                                    <a class="wishlist add-to-wishlist" href="#"
                                                        title="Add to Wishlist"><i class="icon anm anm-heart-l"
                                                            aria-hidden="true"></i> <span>Add to Wishlist</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--End-product-single-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--End Quick View popup-->

    <!-- Including Jquery -->
    <script src="assets/js/vendor/jquery-3.3.1.min.js"></script>
    <script src="assets/js/vendor/jquery.cookie.js"></script>
    <script src="assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="assets/js/vendor/wow.min.js"></script>
    <!-- Including Javascript -->
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/plugins.js"></script>
    <script src="assets/js/popper.min.js"></script>
    <script src="assets/js/lazysizes.js"></script>
    <script src="assets/js/main.js"></script>
    </div>
    </body>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>

    <script>

        //------------------------------------------------------------------


        //* for selection sort

        const sort = "<%=sort%>" || false

        //* for sort the product and chose low to high or high to low
        if (sort) {

            const selectPrice = document.getElementById("selectPrice")

            for (let i = 0; i < selectPrice[0].length; i++) {

                // alert(selectPrice[0][i].value)

                if (selectPrice[0][i].value === sort) {

                    // alert(selectPrice[0][i].value)

                    selectPrice[0][i].setAttribute("selected", "selected")

                }
            }


        }




        //------------------------------------------------------------------
        const knowCategorie = "<%=knowCategorie%>"

        document.getElementById(knowCategorie).style.color = "blue"

        let price = "<%=selectPrice%>" || false


        let priceName = document.getElementsByName("price")             //* get value from Objec we have to convert arry

        const allPrice = document.getElementById("allPrice")            //* all price for the Produce
        let priceVal = Object.values(priceName)


        for (let i = 0; i < priceVal.length; i++) {


            if (priceVal[i].value == price) {

                priceVal[i].setAttribute("checked", "checked")           //
                allPrice.style.display = "inline-block"
            }


        }

    </script>
    <script>

        //clearSort

        async function sortDdbtn() {



            // alert(SortBy.value)

            const value = SortBy.value
            const data = await fetch(`/sortPrice${value}`, {
                method: "post",
                headers: {
                    "Content-Type": "application/json"
                }
            })

            const resData = await data.json()

            if (resData.success) {

                window.location.href = "/categories"
            }



        }


        async function addCart(id) {



            const data = await fetch(`/singleProduct${id}`, {
                method: "GET",
                headers: {
                    "Content-Type": "application/json"
                }
            })

            const dataRes = await data.json()

            if (dataRes.success) {
                Swal.fire({
                    icon: 'success',
                    title: 'Item Added to Cart',
                    showConfirmButton: false,
                    timer: 1500
                });
            }
        }

    </script>

    <script>
        const filterBtn = document.getElementById("filters")

        const priceProduct = document.getElementById("priceProduct")

        filterBtn.addEventListener("click", async (e) => {

            e.preventDefault()

            let price;

            await new FormData(priceProduct).forEach((value, key) => {

                price = value
            })


            if (price) {

                const data = await fetch(`/priceWiseFilter${price}`, {
                    method: "post",
                    headers: {
                        "Content-Type": "application/json"
                    }

                })

                const res = await data.json()
                if (res.success) {

                    // await alert('fetch success')

                    // window.location.reload()

                    window.location.href = "/categories?page=1"
                }
            } else {

            }

        })


    </script>


    <script>


        const productSearch = document.getElementById("productSearch")

        const productSearchBtn = document.getElementById("productSearchBtn")

        productSearchBtn.addEventListener("click", async (event) => {

            event.preventDefault()



            let value = productSearch.value


            if (value) {

                // alert(value)
                // alert(typeof (value))

                const search = await fetch("/search", {

                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ value })
                })

                const res = await search.json()

                if (res.success) {

                    window.location.href = "/categories"
                }

            }


        })
    </script>
    <!-- belle/shop-right-sidebar.html   11 Nov 2019 12:39:02 GMT -->

    </html>